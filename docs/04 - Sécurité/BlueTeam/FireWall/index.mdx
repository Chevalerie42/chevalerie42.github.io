---
### Param√©trage de la page ###
slug: FireWall # le lien ici : https://XXXXX/docs/Intro_Tuto_de_Cheche
tags: [Introduction, S√©curit√©, BlueTeam, FireWall] # Tags le fichier et permet de grouper par mots clef

### FIL d'Ariane ###
toc_min_heading_level: 2 # Fil d'Ariane, affiche d√©s le niveau de titre 2. Par D√©faut : 2
toc_max_heading_level: 4 # Fil d'Ariane, affiche jusqu'au niveau de titre 4. Par d√©faut : 3

### MetaData ###
title: FireWall # Titre du document
keywords: [Intro, S√©curit√©, BlueTeam, FireWall] # Mots Clef
description: FireWall # La description du document
image: https://chevalerie42.github.io/img/S√©curit√©/BlueTeam/FireWall/FireWall-Logo.png # Image utilis√© par les liens vers cette page. A 1ere vue il faut privil√©gier les liens externe

### SideBar ###
sidebar_label: FireWall # Texte affich√© sur la SideBar. Par d√©faut ce sera le "title"

### Pagination ###
pagination_label: FireWall # Texte utilis√© sur les boutons Suivant/Pr√©c√©dent. Par defaut "Title"
pagination_next: null  # Pagination page suivante. Soit "null" pour ne pas en ajotuer. Soit dossier/fichier (R√©seau/Intro_Reseau)
pagination_prev: S√©curit√©/BlueTeam/index # Pagination page precedent. Soit "null" pour ne pas en ajotuer. Soit dossier/fichier (R√©seau/Intro_Reseau)
---

![Image Jolie FireWall](/img/S√©curit√©/BlueTeam/FireWall/FireWall-Logo.png 'FireWall')

## 1 - Introduction 

Un <ins>**Firewall**</ins> (ou Pare-Feu, en bon franchouillard) est un gros **vigile** de la cyber. Selon un ensemble de r√®gles bien d√©finies, il choisira, si une **connexion** peut entrer ou si elle doit repartir fissa. 

Dans un sch√©ma r√©seau, le FireWall est repr√©sent√© classiquement par ce logo : ![Logo FireWall](/img/S√©curit√©/BlueTeam/FireWall/Logo-FireWall2.png 'Logo FireWall')

:::tip
Bref, il s'agit de la porte d'entr√©e de ton r√©seau
:::

## 2 - Fonctionnement

Dans toute **communication** r√©seau, il y a une **connexion** entre deux entit√©s.
Le Firewall, c'est le vigile de cette connexion
Avant que ton PC puisse discuter avec un serveur, le Firewall se charge de filtrer la demande :

"Toi, tu peux passer, et toi, tu vas rester dehors."

Imagine un vigile devant une bo√Æte de nuit, avec une liste des **"r√®gles"** √† appliquer :
- Costard-cravate ? Ok, entre, la soir√©e est √† toi !
- Surv√™t‚Äô, casquette, baskets ? Non merci, tu d√©gages !

Le firewall, c‚Äôest pareil : il regarde ce qui arrive ou sort et d√©cide si √ßa passe ou non

![Diagramme Fonctionnement G√©n√©ral d'un Firewall](/img/S√©curit√©/BlueTeam/FireWall/Diagramme_Fonctionnement_General_FW.png 'Diagramme_Fonctionnement_General_FW')


## 3 - Les r√©gles

Un Firewall s‚Äôappuie sur une liste d'√©l√©ment pour d√©cider si une connexion doit passer ou non :
- **Le port physique** : C‚Äôest la carte ethernet sur laquelle la connexion passe
- **L'adresse source** : De quel IP vient la connexion ?
- **Le port source** : Par quel port r√©seau la connexion sort-elle ?
- **L'adresse distante** : Sur quel IP la connexion souhaite aller ?
- **Le port distant** : Sur quel port distant la connexion essaie-t-elle de se poser ?
En fonction de ces crit√®res, le firewall prend la d√©cision de laisser ou non la connexion s'√©tablir

|Interface|IP Source|Port|IP Destination|Port Destionation|Action|
| :---:   | :---:   | :---: | :---: | :---:              | :---: |

## 4 - Actions :

Une fois qu‚Äôil a scrut√© toutes les infos, le Firewall va choisir une des trois actions suivantes :
- **Autoriser** : L‚Äôentr√©e est libre, la connexion peut se faire : ‚úÖ
- **Bloquer** : La connexion est ignor√©e sans pr√©vention. √áa fait un peu "je t'ai vu dans la file ... Mais je m'en fou, tu rentre pas". En soit, l'emetteur n'a pas l'information qu'il a √©t√© refus√©. Ce dernier ne recevra pas l'√©chec de sa tentative. Il peut interpr√©ter ca comme une connexion r√©seau d√©faillante ‚ùå
- **Rejeter** : Le firewall est plus direct. "C'est gentil mais non merci, rentre chez ta m√©re !" ü¶µüí•ü¶∂üëä

### A - Exemple de r√©gle

Prenons un _<ins>exemple</ins>_ :
- Mon LAN est branch√© sur le port "INT_LAN" de mon FW
- Mon ordinateur poss√©de l'IP : 192.168.1.66
- J'ouvre une connexion sur un port al√©atoire (_voir fonctionnement TCP/IP_) : 45678
- Je veux joindre le site web https://chevalerie42.github.io/ (Ici : 185.199.110.153)
- Et ceux sur son service https : 443
- Je souhaite quel soit autoris√©

La r√©gle est donc :

|Interface|IP Source|Port|IP Destination|Port Destionation|Action|
| :---:   | :---:   | :---: | :---: | :---:              | :---: |
|INT_LAN|192.168.1.6|ANY|185.199.110.153|443|Autoris√©|

## 5 - Les √©tats
Bien que dans ma carri√©re, je n'en ai gu√®re rencontr√©, il est important de le savoir. Des FireWalls, il y en a deux types, et certains sont un peu plus old school que d'autres.

### A - StateLess
Les firewalls **stateless** ("Sans √©tats"), c‚Äôest un peu l‚Äôancienne √©cole, le papi du firewall. üë¥üèªüëµ

Chaque paquet qui passe par le firewall est trait√© sans tenir compte de ce qui s‚Äôest pass√© avant. 
En gros, chaque demande est comme une nouvelle question : "Puis-je entrer ?"

Ce qui fait que nous devons param√©trer "l'aller-retour" :
- Si j'autorise mon ordinateur a aller sur mon site web
- Je n'ai pas autoriser le site web a r√©pondre a mon site web : Je dois donc param√©trer 2 r√©gles :

|Interface|IP Source|Port|IP Destination|Port Destionation|Action|
| :---:   | :---:   | :---: | :---: | :---:| :---: |
|INT_LAN|192.168.1.6|ANY|185.199.110.153|443|Autoris√©|
|INT_WAN|85.199.110.153|443|192.168.1.6|ANY|Autoris√©|

### B - StateFull
Les firewalls **statefull** ("Avec √©tat"), eux, ont une m√©moire ! 
Une fois qu'ils ont v√©rifi√© une connexion et que tout est ok, 
ils ne rev√©rifient pas tout le temps chaque paquet.
> C'est un gain en terme de rapidit√© et en terme de gestion

Une fois que ta connexion est valid√©, le port de connexion est enregistr√©, et √† chaque fois qu'elle passe, le firewall ne regarde pas sa r√©gle mais se souviens qu'elle √©t√© valid√© et laisser passer

## 6 - Types de FireWall

Les firewalls peuvent √™tre soit **physiques** (des "boitiers" avec des ports Ethernet), soit **logiciels** (comme celui nativement int√©g√©r√© dans un PC Windobe). 

- **FireWall physique** : Comme il s'agit d'un **boitier**, on le place dans la salle serveur, g√©n√©ralement branch√© directement sur la connexion internet puis sur le switch. Toute les "enveloppes" transitent physiquement par lui 
- **Firewalls logiciels** : Nativement sur les √©quipements (notamment sur ton Windobe) il y a un firewall interne de type **logiciel** qui permet notamment de pouvoir filtrer physiquement ce qui transitent par lui-m√™me

## 7 - UTM

**Aujourd'hui**, les firewalls ne sont plus de simples vigiles. 
Si le firewall est un super-h√©ros, les "Firewalls **UTM**" (**<ins>Unified Threat Management</ins>** ou Gestion Unifi√©e des Menaces toujours en franchouillard) sont les Avengers. ü¶∏üèæ‚Äç‚ôÇÔ∏è
Ils int√©grent tout un tas de fonctionnalit√© autre que le simple filtrage de connexion
On peut y retrouver tout un tas de fonctionnalit√© tel que : 
- **IDS** (Intrusion Detection System) : Le vigile ne va pas s'arreter au costard-cravate d'apparence. Il va d√©sormais le **fouiller** et regarder tout ce qui peut paraitre louche. S'il trouve quelque chose il **alerte**
- **IPS** (Intrusion Detection System), c‚Äôest le niveau sup√©rieur. Le vigile a detect√© le truc louche et nous a alert√©. D√©sormais il a la capacit√© de **bloquer** directement toute menace d√©tect√©e

:::info
Aujourd'hui, on dit directement "FireWall" par abus de langage. Ce que l'on veut dire par la g√©n√©ralement est "FireWall UTM StateFull"
:::

## 8 - Bonne pratique

Si la connexion n'entre pas dans le crit√©re de la premi√©re r√©gle, le FireWall regarde si elle correspond avec la seconde, puis la troisi√©me et ainsi de suite ...

De fait, il y a deux philosophie de param√©trage : 
- J'interdis petit a petit et j'**autorise** tout pour terminer
- J'autorise ce dont j'ai besoin et j'**interdis** tout pour terminer

Evidemment, la bonne pratique est la seconde philosophie.
> **<ins>La derni√©re r√©gle doit √™tre de tout refuser</ins>**

Dans un soucis de s√©curit√© accrue, je ne dois autoriser que le strict minimum et donc l'essentiel. 

**Trop de permission revient √† transformer le vigile en simple portier.**

Il faut donc analyser en profondeur le besoin et √™tre le plus **"granulaire"** possible
> **<ins>Autoriser le strict minimum</ins>**

Au bout d'un moment, avec tout nos param√©trages, on se retrouve vite avec une tr√©tra-chi√© de r√©gles,
Il est recommand√© d'**en avoir le moins possible**. 

L'**ANSSI** (Agence Nationale de la S√©curit√© des Syst√©me d'Information), recommande de ne pas en avoir plus de 100 
> **<ins>Moins de 100 r√©gles</ins>**

Il est important de faire des **"groupes"** pour faciliter la gestion

Par exemple j'ai trois serveurs qui ont besoin de la m√™me r√©gle qui est d'autoriser le https (443) en sortie

Au lieu de cr√©er trois r√©gles, je n'ai qu'a cr√©er un groupe "Serveurs" contenant les trois adresses de serveurs, et y autoriser le 443
> **<ins>Les groupes permettent de param√©trer moins de r√©gles</ins>**

Les syst√©mes informatique √©voluent, il est important de maintenir le firewall √† jour. Malheureusement, un firewall, devient vite le **bordel**. Surtout quand on m√©lange des adresses avec des groupes.

Il vaut mieux penser √† une **convention de nommage** simple et clair avec une jolie petite **description** expliquant pourquoi nous avons cr√©er cette r√©gle
> **<ins>Convention de nommage</ins>**

D'une √©vidence de type √©vidente, les menaces sont d√©couvertes tous les jours, le firewall doit donc √™tre **mis √† jour** tr√®s tr√®s tr√®s tr√®s r√©guli√®rement

### A - CheckList de bonne pratique
- [ ] La derni√®re r√©gle est un refus de tout ce qui n'est pas autoris√©
- [ ] Autorisation la plus strict possible
- [ ] J'abuse des groupes de ports / d'h√¥tes et de DNS
- [ ] Moins de 100 r√©gles
- [ ] Convention de nommage avec description
- [ ] Mise √† jour r√©guli√®re

## 9 - Conclusion

Le firewall, c‚Äôest la **<ins>premi√®re ligne de d√©fense</ins>** dans un r√©seau, de fait, c'est inn√©vitablement **la plus importante !** 

Son taff de **detection** et de **blocage** des grand m√©chant pas beau est simplement **indispensable**.

Une fois que le cambrioleur est dans la maison, c'est d√©ja trop tard. Il faut le bloquer en amont.
> Un firewall bien configur√©, c‚Äôest la premiere √©tape pour ne pas se faire cambrioler.

---
**_`Voici la liste des tutos disponibles :`_**

import DocCardList from '@theme/DocCardList';

<DocCardList />